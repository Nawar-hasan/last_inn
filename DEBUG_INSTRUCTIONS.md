# ุชุนูููุงุช Debug ููู API

## ุงูุฎุทูุฉ 1: ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ุฃูุดุฆ ููู `.env.local` ูู ุฌุฐุฑ ุงููุดุฑูุน ูุงุณุชุฎุฏู ุงูููู ุงูุชุงููุฉ ุจุงูุถุจุท:

```env
LEARNWORLD_API_URL=https://innovologia.learnworlds.com/admin/api/v2
LEARNWORLD_API_KEY=I9KZFaZKmtnMf3rYf4VsaaS0a29VOsySY3NtFQyI
USE_MOCK_DATA=false
```

**ููุงุญุธุฉ ูููุฉ:** ูุฌูุฏ `/v2` ูู ููุงูุฉ ุงูู URL ุถุฑูุฑู ุฌุฏุงู. ุจุฏููู ูุฏ ูุชู redirect ุฅูู ุตูุญุฉ HTML.

## ุงูุฎุทูุฉ 2: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ

```bash
# ุฃููู ุงูุณูุฑูุฑ ุงูุญุงูู
Ctrl + C

# ุฃุนุฏ ุงูุชุดุบูู
npm run dev
```

## ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุงูู API

ูู ูุงูุฐุฉ CMD ุฃู PowerShell ุฌุฏูุฏุฉุ ููุฐ:

```bash
curl http://localhost:3000/api/courses
```

## ุงูุฎุทูุฉ 4: ูุญุต ุงูู Logs

ูู ูุงูุฐุฉ ุงูุทุฑููุฉ ุญูุซ ูุนูู ุงูุณูุฑูุฑุ ุงุจุญุซ ุนู ุงูู console.log ุงูุชุงููุฉ:

### ุงููุนูููุงุช ุงููุทููุจุฉ:

1. **ENV** - ุชุฃูุฏ ูู:
   - `LEARNWORLD_API_URL` ูุนุฑุถ ุงููููุฉ ุงูุตุญูุญุฉ
   - `LEARNWORLD_API_KEY` ูุนุฑุถ `true` (ููุฌูุฏ)

2. **Will fetch URL** - ูุฌุจ ุฃู ุชููู:
   ```
   https://innovologia.learnworlds.com/admin/api/v2/courses
   ```

3. **response status** - ุงูุญุงูุงุช ุงููุญุชููุฉ:
   - `200` - ูุฌุงุญ โ
   - `301` ุฃู `302` - redirect (ูุดููุฉ ูู ุงูู URL)
   - `401` - ูุดููุฉ ูู ุงูู API Key
   - `404` - ุงูู endpoint ุบูุฑ ููุฌูุฏ

4. **response final URL** - ูุฌุจ ุฃู ุชููู ููุณ ุงูู URL ุงููุทููุจ:
   - ุฅุฐุง ูุงู ูุฎุชูู (ูุซู `https://www.learnworlds.com/...`) = ุญุฏุซ redirect

5. **content-type** - ูุฌุจ ุฃู ูููู:
   - `application/json` โ
   - ุฅุฐุง ูุงู `text/html` = ูุตู ูุตูุญุฉ ููุจ ุจุฏู API โ

6. **RAW body** - ุฃูู 4000 ุญุฑู ูู ุงูุงุณุชุฌุงุจุฉ:
   - ุฅุฐุง ุจุฏุฃุช ุจู `[{` ุฃู `{` = JSON ุตุญูุญ โ
   - ุฅุฐุง ุจุฏุฃุช ุจู `<!DOCTYPE html>` = ุตูุญุฉ HTML โ

## ุงูุฎุทูุฉ 5: ุงูุชุญููู ูุงูุฅุตูุงุญ

### ุงูุณููุงุฑูู 1: ุญุตูุช ุนูู HTML ุจุฏู JSON

**ุงูุณุจุจ ุงููุญุชูู:** 
- ุงูู URL ุฎุงุทุฆ ุฃู ุญุฏุซ redirect
- ุงูู API Key ุบูุฑ ุตุญูุญ

**ุงูุญู:**
1. ุชุญูู ูู `final URL` ูู ุงูู logs
2. ุชุฃูุฏ ูู ุฃู LEARNWORLD_API_URL ููุชูู ุจู `/v2`
3. ุชุฃูุฏ ูู ุตุญุฉ ุงูู Access Token ูู LearnWorlds Dashboard

### ุงูุณููุงุฑูู 2: Status 401 Unauthorized

**ุงูุณุจุจ:** ุงูู API Key ุบูุฑ ุตุญูุญ ุฃู ููุชูู ุงูุตูุงุญูุฉ

**ุงูุญู:**
1. ุงุฐูุจ ุฅูู LearnWorlds Dashboard
2. Settings โ API & Webhooks โ Access Tokens
3. ุงูุณุฎ ุงูู Access Token ุงูุตุญูุญ
4. ุญุฏูุซ `.env.local`

### ุงูุณููุงุฑูู 3: Status 404 Not Found

**ุงูุณุจุจ:** ุงูู endpoint ุบูุฑ ููุฌูุฏ

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุงูู URL ุงููุงูู
2. ุชุญูู ูู ูุซุงุฆู LearnWorlds API
3. ุฌุฑุจ endpoints ุฃุฎุฑู

### ุงูุณููุงุฑูู 4: ุญุตูุช ุนูู JSON ุตุญูุญ

**ููุชุงุฒ!** ๐

ุงูุฎุทูุฉ ุงูุชุงููุฉ:
1. ุฃุฑุณู ุงูู raw JSON ุงููุงูู (ุนูู ุงูุฃูู ุฃูู course object)
2. ุณุฃููู ุจูุชุงุจุฉ normalization code
3. ูุทุจู ููุณ ุงูู pattern ุนูู ุจููุฉ ุงูู endpoints

## ุงูุฎุทูุฉ 6: ุจุนุฏ ุงููุฌุงุญ

ุจุนุฏ ุงูุชุฃูุฏ ูู ุฃู ุงูู API ูุนูู ุจุดูู ุตุญูุญุ ุณูููู ุจู:

1. ุงุณุชุจุฏุงู ููุฏ debug ุจููุฏ production
2. ุฅุถุงูุฉ normalization ููุจูุงูุงุช
3. ุชุทุจูู ููุณ ุงูู pattern ุนูู:
   - `/api/courses/[id]`
   - `/api/lessons?courseId=...`
   - `/api/enrollments`
   - `/api/sso`

## ุฃุฏูุงุช ูุณุงุนุฏุฉ ููุงุฎุชุจุงุฑ ุนูู Windows

### ุงุณุชุฎุฏุงู PowerShell (ููุถู):

```powershell
Invoke-RestMethod -Uri "http://localhost:3000/api/courses" -Method Get
```

### ุงุณุชุฎุฏุงู curl (ุฅุฐุง ูุงู ูุซุจุช):

```bash
curl http://localhost:3000/api/courses
```

### ุงุณุชุฎุฏุงู ุงููุชุตูุญ:

ุงูุชุญ: `http://localhost:3000/api/courses` ูุจุงุดุฑุฉ ูู ุงููุชุตูุญ

## ููุงุญุธุงุช ูููุฉ

1. **ูุง ุชูุดุฑ ุงูู API Key ุนูู GitHub** - ุงุณุชุฎุฏู `.env.local` ููุท (ููู ูุญูู)
2. **ุงูู `.env.local` ูู `.gitignore`** - ูุง ูุชู ุฑูุนู ููู repository
3. **ููู Production ุนูู Vercel** - ุฃุถู ุงููุชุบูุฑุงุช ูู Vercel Dashboard
4. **ุงูู `/v2` ุถุฑูุฑู** - ูุง ุชุญุฐูู ูู ุงูู URL

## ุฃุณุฆูุฉ ุดุงุฆุนุฉ

**Q: ูู ุณูุคุซุฑ ูุฐุง ุนูู ุงูุณููู ุงูุญุงูู ูู LearnWorldsุ**
A: ูุงุ ุฃุจุฏุงู. ุฃูุช ููุท ุชูุฑุฃ ุงูุจูุงูุงุช ุนุจุฑ API.

**Q: ูู ูููู ุงุณุชุฎุฏุงู ููุง ุงูููุตุชูู ูุนุงูุ**
A: ูุนูุ ููุง ุงูููุตุชูู ุชุณุชุฎุฏูุงู ููุณ ูุงุนุฏุฉ ุงูุจูุงูุงุช.

**Q: ูุงุฐุง ูู ูู ุฃุญุตู ุนูู ุฃู responseุ**
A: ุชุญูู ูู ุฃู ุงูุณูุฑูุฑ ูุนูู (`npm run dev`) ูุฃู ุงูู port 3000 ุบูุฑ ูุณุชุฎุฏู.

**Q: ููู ุฃุนุฑู ุฃู ุงูู API Key ุตุญูุญุ**
A: ุงุฐูุจ ุฅูู LearnWorlds Dashboard โ Settings โ API & Webhooks โ Access Tokens

## ุงูุชูุงุตู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงููุ ุฃุฑุณู ูู:
1. ูุงุชุฌ ุงูู `curl` ูุงูู
2. ุฌููุน ุงูู console.log ูู ุงูุทุฑููุฉ
3. ูุญุชูู ููู `.env.local` (ุจุฏูู ุงูู API Key ุงููุนูู)
